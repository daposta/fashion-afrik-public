<app-header [cart]="cart"></app-header>
<section class="jumbotron">
	<div class="inner-content text-center">
		<h4 class="boldest">
			Account
		</h4>
		<span *ngIf="not_customer" style="color: #FFF; background: #EB5757; padding: 10px; position: relative; top: 20px;">
			account does not have permission for this site
		</span>
	</div>
</section>
<section class="padded">
	<div class="container">
		<div class="row">
			<div class="col-md-5">
				<h4 class="form-title">LOGIN</h4>
				<form [formGroup]="loginForm" (ngSubmit)="login()" class="loginForm" novalidate>
					<div class="row">
						<div class="form-group col-md-12">
							<input type="text" class="form-control" name="email" [(ngModel)]="loginUser.email" [formControl]="loginForm.controls['email']"
							 pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$" placeholder="Email Address">

							<div *ngIf="loginForm.controls['email'].hasError('required') && loginAttempt" style="color: red">Email is required</div>

							<div *ngIf="loginForm.controls['email'].hasError('pattern')  && loginAttempt" style="color: red">Email is invalid. Format should be john@doe.com.</div>
						</div>

						<div class="form-group col-md-12">
							<input type="password" class="form-control" name="password" [(ngModel)]="loginUser.password" [formControl]="loginForm.controls['password']"
							 placeholder="Password">

							<div *ngIf="loginForm.controls['password'].hasError('required') && loginAttempt" style="color: red">Password is required</div>

							<p class="float-right">
								<a routerLink="/forget-password" style="font-size: 14px; margin: 10px 0; display: inline-block; color: #fff">
									Forgot your Password?
								</a>
							</p>
						</div>
					</div>
					<button type="submit" class="btn btn-block btn-accent" [disabled]="loading">
						Login
						<i class="fa fa-spinner fa-spin" *ngIf="loading"></i>
					</button>
				</form>
			</div>

			<div class="col-md-5 offset-md-2">
				<h4 class="form-title">Sign Up</h4>
				<form [formGroup]="registerForm" (ngSubmit)="register()" class="registerForm" novalidate>
					<div class="row">
						<div class="form-group col-md-6">
							<input type="text" class="form-control" [(ngModel)]="registerUser.first_name" [formControl]="registerForm.controls['first_name']"
							 placeholder="First Name">

							<div *ngIf="registerForm.controls['first_name'].hasError('required') && registerAttempt" style="color: red">First Name is required</div>
						</div>

						<div class="form-group col-md-6">
							<input type="text" class="form-control" [(ngModel)]="registerUser.last_name" [formControl]="registerForm.controls['last_name']"
							 placeholder="Last Name">

							<div *ngIf="registerForm.controls['last_name'].hasError('required') && registerAttempt" style="color: red">Last Name is required</div>
						</div>
					</div>

					<div class="row">
						<div class="form-group col-md-12">
							<input type="email" class="form-control" [(ngModel)]="registerUser.email" [formControl]="registerForm.controls['email']"
							 pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,6})+$" placeholder="Email Address">

							<div *ngIf="registerForm.controls['email'].hasError('required') && registerAttempt" style="color: red">Email is required</div>

							<div *ngIf="registerForm.controls['email'].hasError('pattern')  && registerAttempt" style="color: red">Email is invalid. Format should be john@doe.com.</div>
						</div>
					</div>

					<div class="row">
						<div class="form-group col-md-12">
							<input type="password" class="form-control" [(ngModel)]="registerUser.password" [formControl]="registerForm.controls['password']"
							 placeholder="Password" required>

							<div *ngIf="registerForm.controls['password'].hasError('required') && registerAttempt" style="color: red">Password is required</div>

							<div *ngIf="registerForm.controls['password'].hasError('minlength') && registerAttempt" style="color: red">Password field must have a minimum of 8 characters</div>
						</div>
					</div>

					<div class="row">
						<div class="form-group col-md-12">
							<input type="password" name="confirmPassword" class="form-control" [(ngModel)]="registerUser.confirmPassword" [formControl]="registerForm.controls['confirmPassword']"
							 placeholder="Confirm Password" required>

							<div *ngIf="registerForm.controls['confirmPassword'].hasError('required') && registerAttempt" style="color: red">Confirm Password is required</div>

							<div *ngIf="registerForm.hasError('notSame') && registerAttempt" style="color: red">Password fields should match</div>

							<div *ngIf="registerForm.controls['confirmPassword'].hasError('minlength') && registerAttempt" style="color: red">Password field must have a minimum of 8 characters</div>
						</div>
					</div>

					<div class="row">
						<div class="form-group col-md-12">
							<input type="tel" name="mobile" class="form-control" [(ngModel)]="registerUser.mobile" [formControl]="registerForm.controls['mobile']"
							 placeholder="Mobile" style="width: 100%; padding-left: 50px;" required>

							<div *ngIf="registerForm.controls['mobile'].hasError('required') && registerAttempt" style="color: red">Mobile is required</div>

						</div>
					</div>

					<div class="form-actions">
						<button type="submit" class="btn btn-block btn-accent" [disabled]="loading">
							Create an account
							<i class="fa fa-spinner fa-spin" *ngIf="loading"></i>
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</section>